name: CI - Validate Pipeline

on:
push:
branches: [ "main" ]
pull_request:

jobs:
test-train:
runs-on: ubuntu-latest

steps:
- name: Checkout repo
  uses: actions/checkout@v4

- name: Setup Python
  uses: actions/setup-python@v5
  with:
    python-version: "3.11"

- name: Install system deps
  run: |
    sudo apt-get update
    sudo apt-get install -y build-essential python3-dev

- name: Install dependencies
  run: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt

- name: Initialize ZenML
  run: |
    zenml init || true

- name: Run Training Pipeline
  run: |
    python run_pipeline.py
